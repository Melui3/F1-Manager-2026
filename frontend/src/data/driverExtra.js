// src/data/driverExtra.js
// Clé stable : surname_number (comme tes images), ex: verstappen_3
// Objectif : infos "wiki" MANUELLES côté front, sans toucher au backend.
//
// IMPORTANT : les teamName doivent matcher les strings du backend (team.name / driver.team).
// Les numéros 2026 sont alignés avec la liste officielle F1/FIA. (voir sources)

export const DRIVER_EXTRA = {
    // ===== ALPINE =====
    "gasly_10": {
        teamName: "BWT Alpine F1 Team",
        number: 10,
        displayName: "Pierre Gasly",
        countryCode: "FRA",
        birthYear: null, // TODO
        role: "Lead",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "colapinto_43": {
        teamName: "BWT Alpine F1 Team",
        number: 43,
        displayName: "Franco Colapinto",
        countryCode: "ARG",
        birthYear: null, // TODO
        role: "Rising",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== ASTON MARTIN =====
    "alonso_14": {
        teamName: "Aston Martin Aramco Formula One Team",
        number: 14,
        displayName: "Fernando Alonso",
        countryCode: "ESP",
        birthYear: null, // TODO
        role: "Veteran",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "stroll_18": {
        teamName: "Aston Martin Aramco Formula One Team",
        number: 18,
        displayName: "Lance Stroll",
        countryCode: "CAN",
        birthYear: null, // TODO
        role: "Support",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== AUDI =====
    "bortoleto_5": {
        teamName: "Audi F1 Team (Revolut)",
        number: 5,
        displayName: "Gabriel Bortoleto",
        countryCode: "BRA",
        birthYear: null, // TODO
        role: "Rookie",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "hulkenberg_27": {
        teamName: "Audi F1 Team (Revolut)",
        number: 27,
        displayName: "Nico Hülkenberg",
        countryCode: "GER",
        birthYear: null, // TODO
        role: "Veteran",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== CADILLAC =====
    "perez_11": {
        teamName: "Cadillac Formula One Team",
        number: 11,
        displayName: "Sergio Pérez",
        countryCode: "MEX",
        birthYear: null, // TODO
        role: "Veteran",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "bottas_77": {
        teamName: "Cadillac Formula One Team",
        number: 77,
        displayName: "Valtteri Bottas",
        countryCode: "FIN",
        birthYear: null, // TODO
        role: "Veteran",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== FERRARI =====
    "leclerc_16": {
        teamName: "Scuderia Ferrari HP",
        number: 16,
        displayName: "Charles Leclerc",
        countryCode: "MON",
        birthYear: null, // TODO
        role: "Lead",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "hamilton_44": {
        teamName: "Scuderia Ferrari HP",
        number: 44,
        displayName: "Lewis Hamilton",
        countryCode: "GBR",
        birthYear: null, // TODO
        role: "Champion",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== HAAS =====
    "ocon_31": {
        teamName: "TGR Hass F1 Team",
        number: 31,
        displayName: "Esteban Ocon",
        countryCode: "FRA",
        birthYear: null, // TODO
        role: "Lead",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "bearman_87": {
        teamName: "TGR Hass F1 Team",
        number: 87,
        displayName: "Oliver Bearman",
        countryCode: "GBR",
        birthYear: null, // TODO
        role: "Rising",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== McLAREN =====
    "norris_1": {
        teamName: "McLaren Mastercard Formula 1 Team",
        number: 1,
        displayName: "Lando Norris",
        countryCode: "GBR",
        birthYear: null, // TODO
        role: "Champion",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "piastri_81": {
        teamName: "McLaren Mastercard Formula 1 Team",
        number: 81,
        displayName: "Oscar Piastri",
        countryCode: "AUS",
        birthYear: null, // TODO
        role: "Lead",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== MERCEDES =====
    "antonelli_12": {
        teamName: "Mercedes-AMG Petronas Formula One Team",
        number: 12,
        displayName: "Andrea Kimi Antonelli",
        countryCode: "ITA",
        birthYear: null, // TODO
        role: "Rising",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "russell_63": {
        teamName: "Mercedes-AMG Petronas Formula One Team",
        number: 63,
        displayName: "George Russell",
        countryCode: "GBR",
        birthYear: null, // TODO
        role: "Lead",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== RACING BULLS =====
    "lawson_30": {
        teamName: "Visa Cash App Racing Bulls F1 Team",
        number: 30,
        displayName: "Liam Lawson",
        countryCode: "NZL",
        birthYear: null, // TODO
        role: "Lead",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "lindblad_41": {
        teamName: "Visa Cash App Racing Bulls F1 Team",
        number: 41,
        displayName: "Arvid Lindblad",
        countryCode: "GBR",
        birthYear: null, // TODO
        role: "Rookie",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== RED BULL =====
    "verstappen_3": {
        teamName: "Oracle Red Bull Racing",
        number: 3,
        displayName: "Max Verstappen",
        countryCode: "NED",
        birthYear: null, // TODO
        role: "Champion",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "hadjar_6": {
        teamName: "Oracle Red Bull Racing",
        number: 6,
        displayName: "Isack Hadjar",
        countryCode: "FRA",
        birthYear: null, // TODO
        role: "Rising",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },

    // ===== WILLIAMS =====
    "albon_23": {
        teamName: "Atlassian Williams Racing",
        number: 23,
        displayName: "Alexander Albon",
        countryCode: "THA",
        birthYear: null, // TODO
        role: "Lead",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
    "sainz_55": {
        teamName: "Atlassian Williams Racing",
        number: 55,
        displayName: "Carlos Sainz",
        countryCode: "ESP",
        birthYear: null, // TODO
        role: "Lead",
        style: "—",
        strengths: [],
        weaknesses: [],
        traits: [],
        rival: null,
        notes: [],
    },
};

// ---------- helpers ----------
export function driverKey(driver) {
    const s = String(driver?.surname ?? "").trim().toLowerCase();
    const n = String(driver?.number ?? "").trim();
    if (!s || !n) return null;
    return `${s}_${n}`;
}

export function getDriverExtra(driverOrKey) {
    const key =
        typeof driverOrKey === "string" ? driverOrKey : driverKey(driverOrKey);
    return key ? DRIVER_EXTRA[key] ?? null : null;
}

// Fusion safe : backend d'abord, puis extra (sans écraser les champs backend utiles)
export function mergeDriver(driver) {
    const extra = getDriverExtra(driver);
    return extra ? { ...driver, _extra: extra } : { ...driver, _extra: null };
}